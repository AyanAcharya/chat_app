<form action="save_ethnicity.php" method="POST">
    <!-- ... Other form elements ... -->

    <div class="mt-2 flex flex-wrap gap-1">
        <?php
        $result = get_ethnicity($mysqli);
        while ($row = $result->fetch_assoc()) {
            echo '<button class="px-6 py-2 rounded-3xl w-fit border border-gray-300 text-gray-500 ethnicity-button" onclick="selectEthnicity(' . $row['id'] . ')">' . $row['ethnicity'] . '</button>';
        }
        ?>
    </div>


</form>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    
    var selectedEthnicities = [];

    function selectEthnicity(ethnicityId) {
        var index = selectedEthnicities.indexOf(ethnicityId);

        if (index === -1) {
            
            selectedEthnicities.push(ethnicityId);
        } else {
            
            selectedEthnicities.splice(index, 1);
        }

        console.log(selectedEthnicities); 

        // Update a hidden input field with the selected ethnicities to submit them with the form
        $('input[name="selected_ethnicities"]').val(selectedEthnicities.join(','));
    }
</script>
<?php


if ($_SERVER["REQUEST_METHOD"] === "POST") {
    // Get the user's nationality
    $nationality = $_POST["nationality"];

    // Get the selected ethnicities from the hidden input field
    $selectedEthnicities = isset($_POST["selected_ethnicities"]) ? explode(',', $_POST["selected_ethnicities"]) : array();

  
    exit();
}
?>
